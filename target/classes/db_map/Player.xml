<?xml version = "1.0" encoding = "UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace = "Player">

   <insert id = "insert" parameterType = "Player">
      	INSERT INTO players (USERNAME, PASSWORD, EMAIL, PROFILE_PIC, LOCATION ) VALUES (#{username}, #{password}, #{email}, #{profile_pic}, #{location});
			
      	<selectKey keyProperty = "id" resultType = "int" order = "AFTER">
        	select last_insert_id() as id
		</selectKey>   
	</insert> 
	
	<update id = "update" parameterType = "Player">
    	UPDATE players SET USERNAME = #{username}, PASSWORD = #{password}, EMAIL = #{email}, PROFILE_PIC = #{profile_pic}, LOCATION = #{location} WHERE PLAYER_ID = #{player_id};
	</update>
    
    <select id="getByUsername" parameterType = "String" resultType="Player">
    	SELECT * FROM players where USERNAME = #{username};
	</select>
    	
	<select id="getAll" resultType="Player">
    	SELECT * FROM players
	</select>
    	
	<resultMap id = "result" type = "Player">
   		<result property = "player_id" column = "PLAYER_ID"/>
   		<result property = "username" column = "USERNAME"/>
   		<result property = "password" column = "PASSWORD"/>
   		<result property = "email" column = "EMAIL"/>
   		<result property = "profile_pic" column = "PROFILE_PIC"/>
   		<result property = "location" column = "LOCATION"/>
	</resultMap>

	
</mapper>