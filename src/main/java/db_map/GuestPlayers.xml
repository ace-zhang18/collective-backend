<?xml version = "1.0" encoding = "UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace = "GuestPlayer">

   <insert id = "insert" parameterType = "GuestPlayer">
      	INSERT INTO guest_players (PLAYER_ID, TOURNAMENT_ID) VALUES (#{player_id}, #{tournament_id});
			
      	<selectKey keyProperty = "id" resultType = "int" order = "AFTER">
        	select last_insert_id() as id
		</selectKey>   
	</insert> 
	
	<update id = "update" parameterType = "Player">
    	UPDATE players SET USERNAME = #{username}, PASSWORD = #{password}, EMAIL = #{email}, PROFILE_PIC = #{profile_pic}, LOCATION = #{location}, DEVICE_KEY = #{device_key} WHERE PLAYER_ID = #{player_id};
	</update>
    
    <select id="get" parameterType = "int" resultType="Player">
    	SELECT * FROM players where PLAYER_ID = #{player_id};
	</select>
    
    <select id="getByUsername" parameterType = "String" resultType="Player">
    	SELECT * FROM players where USERNAME = #{username};
	</select>
    	
	<select id="getAll" resultType="Player">
    	SELECT * FROM players
	</select>
	
	
    	
	<resultMap id = "result" type = "GuestPlayer">
	   	<result property = "guest_id" column = "GUEST_ID"/>
   		<result property = "player_id" column = "PLAYER_ID"/>
   		<result property = "tournament_id" column = "TOURNAMENT_ID"/>
	</resultMap>

	
</mapper>