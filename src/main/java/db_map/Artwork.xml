<?xml version = "1.0" encoding = "UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace = "Artwork">

   <insert id = "insert" parameterType = "Artwork">
      	INSERT INTO artworks (artwork_id, owners, permissions, history, sale, tags, type, content, nsfw) 
      	VALUES (#{artwork_id}, #{owners}, #{permissions}, #{history}, #{sale}, #{tags}, #{type}, #{content}, #{nsfw});
	</insert> 
	
	<update id = "update" parameterType = "Artwork">
    	UPDATE artworks SET owners = #{owners}, permissions = #{permissions}, history = #{history},
    	sale = #{sale}, tags = #{tags}, type = #{type}, content = #{content}
    	WHERE artwork_id = #{artwork_id};
	</update>
    
    <select id="get" parameterType = "int" resultType="Artwork">
    	SELECT * FROM artworks where artwork_ID = #{artwork_id};
	</select>
    
    	
	<select id="getAll" resultType="Artwork">
    	SELECT * FROM artworks
	</select>
    
	<resultMap id = "result" type = "Artwork">
		<result property = "artwork_id" column = "ARTWORK_ID"/>
		<result property = "owners" column = "OWNERS" javaType="org.postgresql.util.PGobject" typeHandler="handlers.PGObjectTypeHandler"/>
		<result property = "permissions" column = "PERMISSIONS" javaType="org.postgresql.util.PGobject" typeHandler="handlers.PGObjectTypeHandler"/>
		<result property = "history" column = "HISTORY" javaType="org.postgresql.util.PGobject" typeHandler="handlers.PGObjectTypeHandler"/>
		<result property = "sale" column = "SALE" typeHandler="handlers.PGObjectArrayTypeHandler"/>
		<result property = "tags" column = "TAGS" typeHandler="handlers.LongArrayTypeHandler"/>	
		<result property = "type" column = "TYPE"/>
		<result property = "content" column = "CONTENT"/>
	</resultMap>

	
</mapper>