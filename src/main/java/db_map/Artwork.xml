<?xml version = "1.0" encoding = "UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace = "Artwork">

   <insert id = "insert" parameterType = "Artwork">
      	INSERT INTO artworks (artwork_id, owner, permissions, history, sale, type, content, nsfw) 
      	VALUES (#{artwork_id}, #{owner}, #{permissions}, #{history}, #{sale}, #{type}, #{content}, #{nsfw});
	</insert> 
	
	<update id = "update" parameterType = "Artwork">
    	UPDATE artworks SET owner = #{owner}, permissions = #{permissions}, history = #{history},
    	sale = #{sale}, type = #{type}, content = #{content}, nsfw = #{nsfw}
    	WHERE artwork_id = #{artwork_id};
	</update>
    
    <select id="get" resultType="Artwork">
    	SELECT * FROM artworks where artwork_ID = #{artwork_id};
	</select>
    
    	
	<select id="getAll" resultType="Artwork">
    	SELECT * FROM artworks
	</select>
    
	<resultMap id = "result" type = "Artwork">
		<result property = "artwork_id" column = "ARTWORK_ID"/>
		<result property = "owner" column = "OWNER" javaType="org.postgresql.util.PGobject" typeHandler="handlers.PGObjectTypeHandler"/>
		<result property = "permissions" column = "PERMISSIONS" javaType="org.postgresql.util.PGobject" typeHandler="handlers.PGObjectTypeHandler"/>
		<result property = "history" column = "HISTORY" javaType="org.postgresql.util.PGobject" typeHandler="handlers.PGObjectTypeHandler"/>
		<result property = "sale" column = "SALE" typeHandler="handlers.PGObjectArrayTypeHandler"/>
		<result property = "type" column = "TYPE"/>
		<result property = "content" column = "ART"/>
		<result property = "nsfw" column = "NSFW"/>
	</resultMap>

	
</mapper>