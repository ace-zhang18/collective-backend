<?xml version = "1.0" encoding = "UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace = "StaffRole">

   <insert id = "insert" parameterType = "StaffRole" useGeneratedKeys="true" keyProperty="role_id" keyColumn="role_id">
      	INSERT INTO staff_roles (NAME, PERMISSIONS) VALUES (#{name}, #{permissions});
	</insert> 
	
	<update id = "update" parameterType = "StaffRole">
    	UPDATE staff_roles SET NAME = #{name}, PERMISSIONS = #{permissions} WHERE ROLE_ID = #{role_id};
	</update>
    
	<delete id = "delete" parameterType = "long">
    	DELETE FROM staff_roles WHERE role_id = #{role_id}
    </delete>
    
    <select id="get" parameterType = "long" resultMap="staffRoleMap">
    	SELECT * FROM staff_roles WHERE role_id = #{role_id};
	</select>

	<select id="getAll" resultMap="staffRoleMap">
    	SELECT * FROM staff_roles ORDER BY role_id ASC;
	</select>
    	
	<resultMap id = "staffRoleMap" type = "StaffRole">
	   	<result property = "role_id" column = "ROLE_ID"/>
   		<result property = "name" column = "NAME"/>
   		<result property = "permissions" column = "PERMISSIONS" javaType="org.postgresql.util.PGobject" typeHandler="handlers.PGObjectTypeHandler"/>
	</resultMap>
	
</mapper>